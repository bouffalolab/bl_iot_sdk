<html lang="en">
<head>
<title>Common Function Attributes - Using the GNU Compiler Collection (GCC)</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Using the GNU Compiler Collection (GCC)">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Function-Attributes.html#Function-Attributes" title="Function Attributes">
<link rel="next" href="AArch64-Function-Attributes.html#AArch64-Function-Attributes" title="AArch64 Function Attributes">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1988-2018 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``Funding Free Software'', the Front-Cover
Texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.

(a) The FSF's Front-Cover Text is:

     A GNU Manual

(b) The FSF's Back-Cover Text is:

     You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Common-Function-Attributes"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="AArch64-Function-Attributes.html#AArch64-Function-Attributes">AArch64 Function Attributes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Function-Attributes.html#Function-Attributes">Function Attributes</a>
<hr>
</div>

<h4 class="subsection">6.31.1 Common Function Attributes</h4>

<p>The following attributes are supported on most targets.

     <dl>
<!-- Keep this table alphabetized by attribute name.  Treat _ as space. -->

     <dt><code>alias ("</code><var>target</var><code>")</code><dd><a name="index-g_t_0040code_007balias_007d-function-attribute-3468"></a>The <code>alias</code> attribute causes the declaration to be emitted as an
alias for another symbol, which must be specified.  For instance,

     <pre class="smallexample">          void __f () { /* <span class="roman">Do something.</span> */; }
          void f () __attribute__ ((weak, alias ("__f")));
</pre>
     <p class="noindent">defines &lsquo;<samp><span class="samp">f</span></samp>&rsquo; to be a weak alias for &lsquo;<samp><span class="samp">__f</span></samp>&rsquo;.  In C++, the
mangled name for the target must be used.  It is an error if &lsquo;<samp><span class="samp">__f</span></samp>&rsquo;
is not defined in the same translation unit.

     <p>This attribute requires assembler and object file support,
and may not be available on all targets.

     <br><dt><code>aligned (</code><var>alignment</var><code>)</code><dd><a name="index-g_t_0040code_007baligned_007d-function-attribute-3469"></a>This attribute specifies a minimum alignment for the function,
measured in bytes.

     <p>You cannot use this attribute to decrease the alignment of a function,
only to increase it.  However, when you explicitly specify a function
alignment this overrides the effect of the
<samp><span class="option">-falign-functions</span></samp> (see <a href="Optimize-Options.html#Optimize-Options">Optimize Options</a>) option for this
function.

     <p>Note that the effectiveness of <code>aligned</code> attributes may be
limited by inherent limitations in your linker.  On many systems, the
linker is only able to arrange for functions to be aligned up to a
certain maximum alignment.  (For some linkers, the maximum supported
alignment may be very very small.)  See your linker documentation for
further information.

     <p>The <code>aligned</code> attribute can also be used for variables and fields
(see <a href="Variable-Attributes.html#Variable-Attributes">Variable Attributes</a>.)

     <br><dt><code>alloc_align</code><dd><a name="index-g_t_0040code_007balloc_005falign_007d-function-attribute-3470"></a>The <code>alloc_align</code> attribute is used to tell the compiler that the
function return value points to memory, where the returned pointer minimum
alignment is given by one of the functions parameters.  GCC uses this
information to improve pointer alignment analysis.

     <p>The function parameter denoting the allocated alignment is specified by
one integer argument, whose number is the argument of the attribute. 
Argument numbering starts at one.

     <p>For instance,

     <pre class="smallexample">          void* my_memalign(size_t, size_t) __attribute__((alloc_align(1)))
</pre>
     <p class="noindent">declares that <code>my_memalign</code> returns memory with minimum alignment
given by parameter 1.

     <br><dt><code>alloc_size</code><dd><a name="index-g_t_0040code_007balloc_005fsize_007d-function-attribute-3471"></a>The <code>alloc_size</code> attribute is used to tell the compiler that the
function return value points to memory, where the size is given by
one or two of the functions parameters.  GCC uses this
information to improve the correctness of <code>__builtin_object_size</code>.

     <p>The function parameter(s) denoting the allocated size are specified by
one or two integer arguments supplied to the attribute.  The allocated size
is either the value of the single function argument specified or the product
of the two function arguments specified.  Argument numbering starts at
one.

     <p>For instance,

     <pre class="smallexample">          void* my_calloc(size_t, size_t) __attribute__((alloc_size(1,2)))
          void* my_realloc(void*, size_t) __attribute__((alloc_size(2)))
</pre>
     <p class="noindent">declares that <code>my_calloc</code> returns memory of the size given by
the product of parameter 1 and 2 and that <code>my_realloc</code> returns memory
of the size given by parameter 2.

     <br><dt><code>always_inline</code><dd><a name="index-g_t_0040code_007balways_005finline_007d-function-attribute-3472"></a>Generally, functions are not inlined unless optimization is specified. 
For functions declared inline, this attribute inlines the function
independent of any restrictions that otherwise apply to inlining. 
Failure to inline such a function is diagnosed as an error. 
Note that if such a function is called indirectly the compiler may
or may not inline it depending on optimization level and a failure
to inline an indirect call may or may not be diagnosed.

     <br><dt><code>artificial</code><dd><a name="index-g_t_0040code_007bartificial_007d-function-attribute-3473"></a>This attribute is useful for small inline wrappers that if possible
should appear during debugging as a unit.  Depending on the debug
info format it either means marking the function as artificial
or using the caller location for all instructions within the inlined
body.

     <br><dt><code>assume_aligned</code><dd><a name="index-g_t_0040code_007bassume_005faligned_007d-function-attribute-3474"></a>The <code>assume_aligned</code> attribute is used to tell the compiler that the
function return value points to memory, where the returned pointer minimum
alignment is given by the first argument. 
If the attribute has two arguments, the second argument is misalignment offset.

     <p>For instance

     <pre class="smallexample">          void* my_alloc1(size_t) __attribute__((assume_aligned(16)))
          void* my_alloc2(size_t) __attribute__((assume_aligned(32, 8)))
</pre>
     <p class="noindent">declares that <code>my_alloc1</code> returns 16-byte aligned pointer and
that <code>my_alloc2</code> returns a pointer whose value modulo 32 is equal
to 8.

     <br><dt><code>bnd_instrument</code><dd><a name="index-g_t_0040code_007bbnd_005finstrument_007d-function-attribute-3475"></a>The <code>bnd_instrument</code> attribute on functions is used to inform the
compiler that the function should be instrumented when compiled
with the <samp><span class="option">-fchkp-instrument-marked-only</span></samp> option.

     <br><dt><code>bnd_legacy</code><dd><a name="index-g_t_0040code_007bbnd_005flegacy_007d-function-attribute-3476"></a><a name="index-Pointer-Bounds-Checker-attributes-3477"></a>The <code>bnd_legacy</code> attribute on functions is used to inform the
compiler that the function should not be instrumented when compiled
with the <samp><span class="option">-fcheck-pointer-bounds</span></samp> option.

     <br><dt><code>cold</code><dd><a name="index-g_t_0040code_007bcold_007d-function-attribute-3478"></a>The <code>cold</code> attribute on functions is used to inform the compiler that
the function is unlikely to be executed.  The function is optimized for
size rather than speed and on many targets it is placed into a special
subsection of the text section so all cold functions appear close together,
improving code locality of non-cold parts of program.  The paths leading
to calls of cold functions within code are marked as unlikely by the branch
prediction mechanism.  It is thus useful to mark functions used to handle
unlikely conditions, such as <code>perror</code>, as cold to improve optimization
of hot functions that do call marked functions in rare occasions.

     <p>When profile feedback is available, via <samp><span class="option">-fprofile-use</span></samp>, cold functions
are automatically detected and this attribute is ignored.

     <br><dt><code>const</code><dd><a name="index-g_t_0040code_007bconst_007d-function-attribute-3479"></a><a name="index-functions-that-have-no-side-effects-3480"></a>Many functions do not examine any values except their arguments, and
have no effects except to return a value.  Calls to such functions lend
themselves to optimization such as common subexpression elimination. 
The <code>const</code> attribute imposes greater restrictions on a function's
definition than the similar <code>pure</code> attribute below because it prohibits
the function from reading global variables.  Consequently, the presence of
the attribute on a function declaration allows GCC to emit more efficient
code for some calls to the function.  Decorating the same function with
both the <code>const</code> and the <code>pure</code> attribute is diagnosed.

     <p><a name="index-pointer-arguments-3481"></a>Note that a function that has pointer arguments and examines the data
pointed to must <em>not</em> be declared <code>const</code>.  Likewise, a
function that calls a non-<code>const</code> function usually must not be
<code>const</code>.  Because a <code>const</code> function cannot have any side
effects it does not make sense for such a function to return <code>void</code>. 
Declaring such a function is diagnosed.

     <br><dt><code>constructor</code><dt><code>destructor</code><dt><code>constructor (</code><var>priority</var><code>)</code><dt><code>destructor (</code><var>priority</var><code>)</code><dd><a name="index-g_t_0040code_007bconstructor_007d-function-attribute-3482"></a><a name="index-g_t_0040code_007bdestructor_007d-function-attribute-3483"></a>The <code>constructor</code> attribute causes the function to be called
automatically before execution enters <code>main ()</code>.  Similarly, the
<code>destructor</code> attribute causes the function to be called
automatically after <code>main ()</code> completes or <code>exit ()</code> is
called.  Functions with these attributes are useful for
initializing data that is used implicitly during the execution of
the program.

     <p>You may provide an optional integer priority to control the order in
which constructor and destructor functions are run.  A constructor
with a smaller priority number runs before a constructor with a larger
priority number; the opposite relationship holds for destructors.  So,
if you have a constructor that allocates a resource and a destructor
that deallocates the same resource, both functions typically have the
same priority.  The priorities for constructor and destructor
functions are the same as those specified for namespace-scope C++
objects (see <a href="C_002b_002b-Attributes.html#C_002b_002b-Attributes">C++ Attributes</a>).  However, at present, the order in which
constructors for C++ objects with static storage duration and functions
decorated with attribute <code>constructor</code> are invoked is unspecified. 
In mixed declarations, attribute <code>init_priority</code> can be used to
impose a specific ordering.

     <br><dt><code>deprecated</code><dt><code>deprecated (</code><var>msg</var><code>)</code><dd><a name="index-g_t_0040code_007bdeprecated_007d-function-attribute-3484"></a>The <code>deprecated</code> attribute results in a warning if the function
is used anywhere in the source file.  This is useful when identifying
functions that are expected to be removed in a future version of a
program.  The warning also includes the location of the declaration
of the deprecated function, to enable users to easily find further
information about why the function is deprecated, or what they should
do instead.  Note that the warnings only occurs for uses:

     <pre class="smallexample">          int old_fn () __attribute__ ((deprecated));
          int old_fn ();
          int (*fn_ptr)() = old_fn;
</pre>
     <p class="noindent">results in a warning on line 3 but not line 2.  The optional <var>msg</var>
argument, which must be a string, is printed in the warning if
present.

     <p>The <code>deprecated</code> attribute can also be used for variables and
types (see <a href="Variable-Attributes.html#Variable-Attributes">Variable Attributes</a>, see <a href="Type-Attributes.html#Type-Attributes">Type Attributes</a>.)

     <br><dt><code>error ("</code><var>message</var><code>")</code><dt><code>warning ("</code><var>message</var><code>")</code><dd><a name="index-g_t_0040code_007berror_007d-function-attribute-3485"></a><a name="index-g_t_0040code_007bwarning_007d-function-attribute-3486"></a>If the <code>error</code> or <code>warning</code> attribute
is used on a function declaration and a call to such a function
is not eliminated through dead code elimination or other optimizations,
an error or warning (respectively) that includes <var>message</var> is diagnosed. 
This is useful
for compile-time checking, especially together with <code>__builtin_constant_p</code>
and inline functions where checking the inline function arguments is not
possible through <code>extern char [(condition) ? 1 : -1];</code> tricks.

     <p>While it is possible to leave the function undefined and thus invoke
a link failure (to define the function with
a message in <code>.gnu.warning*</code> section),
when using these attributes the problem is diagnosed
earlier and with exact location of the call even in presence of inline
functions or when not emitting debugging information.

     <br><dt><code>externally_visible</code><dd><a name="index-g_t_0040code_007bexternally_005fvisible_007d-function-attribute-3487"></a>This attribute, attached to a global variable or function, nullifies
the effect of the <samp><span class="option">-fwhole-program</span></samp> command-line option, so the
object remains visible outside the current compilation unit.

     <p>If <samp><span class="option">-fwhole-program</span></samp> is used together with <samp><span class="option">-flto</span></samp> and
<samp><span class="command">gold</span></samp> is used as the linker plugin,
<code>externally_visible</code> attributes are automatically added to functions
(not variable yet due to a current <samp><span class="command">gold</span></samp> issue)
that are accessed outside of LTO objects according to resolution file
produced by <samp><span class="command">gold</span></samp>. 
For other linkers that cannot generate resolution file,
explicit <code>externally_visible</code> attributes are still necessary.

     <br><dt><code>flatten</code><dd><a name="index-g_t_0040code_007bflatten_007d-function-attribute-3488"></a>Generally, inlining into a function is limited.  For a function marked with
this attribute, every call inside this function is inlined, if possible. 
Whether the function itself is considered for inlining depends on its size and
the current inlining parameters.

     <br><dt><code>format (</code><var>archetype</var><code>, </code><var>string-index</var><code>, </code><var>first-to-check</var><code>)</code><dd><a name="index-g_t_0040code_007bformat_007d-function-attribute-3489"></a><a name="index-functions-with-_0040code_007bprintf_007d_002c-_0040code_007bscanf_007d_002c-_0040code_007bstrftime_007d-or-_0040code_007bstrfmon_007d-style-arguments-3490"></a><a name="index-Wformat-3491"></a>The <code>format</code> attribute specifies that a function takes <code>printf</code>,
<code>scanf</code>, <code>strftime</code> or <code>strfmon</code> style arguments that
should be type-checked against a format string.  For example, the
declaration:

     <pre class="smallexample">          extern int
          my_printf (void *my_object, const char *my_format, ...)
                __attribute__ ((format (printf, 2, 3)));
</pre>
     <p class="noindent">causes the compiler to check the arguments in calls to <code>my_printf</code>
for consistency with the <code>printf</code> style format string argument
<code>my_format</code>.

     <p>The parameter <var>archetype</var> determines how the format string is
interpreted, and should be <code>printf</code>, <code>scanf</code>, <code>strftime</code>,
<code>gnu_printf</code>, <code>gnu_scanf</code>, <code>gnu_strftime</code> or
<code>strfmon</code>.  (You can also use <code>__printf__</code>,
<code>__scanf__</code>, <code>__strftime__</code> or <code>__strfmon__</code>.)  On
MinGW targets, <code>ms_printf</code>, <code>ms_scanf</code>, and
<code>ms_strftime</code> are also present. 
<var>archetype</var> values such as <code>printf</code> refer to the formats accepted
by the system's C runtime library,
while values prefixed with &lsquo;<samp><span class="samp">gnu_</span></samp>&rsquo; always refer
to the formats accepted by the GNU C Library.  On Microsoft Windows
targets, values prefixed with &lsquo;<samp><span class="samp">ms_</span></samp>&rsquo; refer to the formats accepted by the
<samp><span class="file">msvcrt.dll</span></samp> library. 
The parameter <var>string-index</var>
specifies which argument is the format string argument (starting
from 1), while <var>first-to-check</var> is the number of the first
argument to check against the format string.  For functions
where the arguments are not available to be checked (such as
<code>vprintf</code>), specify the third parameter as zero.  In this case the
compiler only checks the format string for consistency.  For
<code>strftime</code> formats, the third parameter is required to be zero. 
Since non-static C++ methods have an implicit <code>this</code> argument, the
arguments of such methods should be counted from two, not one, when
giving values for <var>string-index</var> and <var>first-to-check</var>.

     <p>In the example above, the format string (<code>my_format</code>) is the second
argument of the function <code>my_print</code>, and the arguments to check
start with the third argument, so the correct parameters for the format
attribute are 2 and 3.

     <p><a name="index-ffreestanding-3492"></a><a name="index-fno_002dbuiltin-3493"></a>The <code>format</code> attribute allows you to identify your own functions
that take format strings as arguments, so that GCC can check the
calls to these functions for errors.  The compiler always (unless
<samp><span class="option">-ffreestanding</span></samp> or <samp><span class="option">-fno-builtin</span></samp> is used) checks formats
for the standard library functions <code>printf</code>, <code>fprintf</code>,
<code>sprintf</code>, <code>scanf</code>, <code>fscanf</code>, <code>sscanf</code>, <code>strftime</code>,
<code>vprintf</code>, <code>vfprintf</code> and <code>vsprintf</code> whenever such
warnings are requested (using <samp><span class="option">-Wformat</span></samp>), so there is no need to
modify the header file <samp><span class="file">stdio.h</span></samp>.  In C99 mode, the functions
<code>snprintf</code>, <code>vsnprintf</code>, <code>vscanf</code>, <code>vfscanf</code> and
<code>vsscanf</code> are also checked.  Except in strictly conforming C
standard modes, the X/Open function <code>strfmon</code> is also checked as
are <code>printf_unlocked</code> and <code>fprintf_unlocked</code>. 
See <a href="C-Dialect-Options.html#C-Dialect-Options">Options Controlling C Dialect</a>.

     <p>For Objective-C dialects, <code>NSString</code> (or <code>__NSString__</code>) is
recognized in the same context.  Declarations including these format attributes
are parsed for correct syntax, however the result of checking of such format
strings is not yet defined, and is not carried out by this version of the
compiler.

     <p>The target may also provide additional types of format checks. 
See <a href="Target-Format-Checks.html#Target-Format-Checks">Format Checks Specific to Particular Target Machines</a>.

     <br><dt><code>format_arg (</code><var>string-index</var><code>)</code><dd><a name="index-g_t_0040code_007bformat_005farg_007d-function-attribute-3494"></a><a name="index-Wformat_002dnonliteral-3495"></a>The <code>format_arg</code> attribute specifies that a function takes a format
string for a <code>printf</code>, <code>scanf</code>, <code>strftime</code> or
<code>strfmon</code> style function and modifies it (for example, to translate
it into another language), so the result can be passed to a
<code>printf</code>, <code>scanf</code>, <code>strftime</code> or <code>strfmon</code> style
function (with the remaining arguments to the format function the same
as they would have been for the unmodified string).  For example, the
declaration:

     <pre class="smallexample">          extern char *
          my_dgettext (char *my_domain, const char *my_format)
                __attribute__ ((format_arg (2)));
</pre>
     <p class="noindent">causes the compiler to check the arguments in calls to a <code>printf</code>,
<code>scanf</code>, <code>strftime</code> or <code>strfmon</code> type function, whose
format string argument is a call to the <code>my_dgettext</code> function, for
consistency with the format string argument <code>my_format</code>.  If the
<code>format_arg</code> attribute had not been specified, all the compiler
could tell in such calls to format functions would be that the format
string argument is not constant; this would generate a warning when
<samp><span class="option">-Wformat-nonliteral</span></samp> is used, but the calls could not be checked
without the attribute.

     <p>The parameter <var>string-index</var> specifies which argument is the format
string argument (starting from one).  Since non-static C++ methods have
an implicit <code>this</code> argument, the arguments of such methods should
be counted from two.

     <p>The <code>format_arg</code> attribute allows you to identify your own
functions that modify format strings, so that GCC can check the
calls to <code>printf</code>, <code>scanf</code>, <code>strftime</code> or <code>strfmon</code>
type function whose operands are a call to one of your own function. 
The compiler always treats <code>gettext</code>, <code>dgettext</code>, and
<code>dcgettext</code> in this manner except when strict ISO C support is
requested by <samp><span class="option">-ansi</span></samp> or an appropriate <samp><span class="option">-std</span></samp> option, or
<samp><span class="option">-ffreestanding</span></samp> or <samp><span class="option">-fno-builtin</span></samp>
is used.  See <a href="C-Dialect-Options.html#C-Dialect-Options">Options Controlling C Dialect</a>.

     <p>For Objective-C dialects, the <code>format-arg</code> attribute may refer to an
<code>NSString</code> reference for compatibility with the <code>format</code> attribute
above.

     <p>The target may also allow additional types in <code>format-arg</code> attributes. 
See <a href="Target-Format-Checks.html#Target-Format-Checks">Format Checks Specific to Particular Target Machines</a>.

     <br><dt><code>gnu_inline</code><dd><a name="index-g_t_0040code_007bgnu_005finline_007d-function-attribute-3496"></a>This attribute should be used with a function that is also declared
with the <code>inline</code> keyword.  It directs GCC to treat the function
as if it were defined in gnu90 mode even when compiling in C99 or
gnu99 mode.

     <p>If the function is declared <code>extern</code>, then this definition of the
function is used only for inlining.  In no case is the function
compiled as a standalone function, not even if you take its address
explicitly.  Such an address becomes an external reference, as if you
had only declared the function, and had not defined it.  This has
almost the effect of a macro.  The way to use this is to put a
function definition in a header file with this attribute, and put
another copy of the function, without <code>extern</code>, in a library
file.  The definition in the header file causes most calls to the
function to be inlined.  If any uses of the function remain, they
refer to the single copy in the library.  Note that the two
definitions of the functions need not be precisely the same, although
if they do not have the same effect your program may behave oddly.

     <p>In C, if the function is neither <code>extern</code> nor <code>static</code>, then
the function is compiled as a standalone function, as well as being
inlined where possible.

     <p>This is how GCC traditionally handled functions declared
<code>inline</code>.  Since ISO C99 specifies a different semantics for
<code>inline</code>, this function attribute is provided as a transition
measure and as a useful feature in its own right.  This attribute is
available in GCC 4.1.3 and later.  It is available if either of the
preprocessor macros <code>__GNUC_GNU_INLINE__</code> or
<code>__GNUC_STDC_INLINE__</code> are defined.  See <a href="Inline.html#Inline">An Inline Function is As Fast As a Macro</a>.

     <p>In C++, this attribute does not depend on <code>extern</code> in any way,
but it still requires the <code>inline</code> keyword to enable its special
behavior.

     <br><dt><code>hot</code><dd><a name="index-g_t_0040code_007bhot_007d-function-attribute-3497"></a>The <code>hot</code> attribute on a function is used to inform the compiler that
the function is a hot spot of the compiled program.  The function is
optimized more aggressively and on many targets it is placed into a special
subsection of the text section so all hot functions appear close together,
improving locality.

     <p>When profile feedback is available, via <samp><span class="option">-fprofile-use</span></samp>, hot functions
are automatically detected and this attribute is ignored.

     <br><dt><code>ifunc ("</code><var>resolver</var><code>")</code><dd><a name="index-g_t_0040code_007bifunc_007d-function-attribute-3498"></a><a name="index-indirect-functions-3499"></a><a name="index-functions-that-are-dynamically-resolved-3500"></a>The <code>ifunc</code> attribute is used to mark a function as an indirect
function using the STT_GNU_IFUNC symbol type extension to the ELF
standard.  This allows the resolution of the symbol value to be
determined dynamically at load time, and an optimized version of the
routine to be selected for the particular processor or other system
characteristics determined then.  To use this attribute, first define
the implementation functions available, and a resolver function that
returns a pointer to the selected implementation function.  The
implementation functions' declarations must match the API of the
function being implemented.  The resolver should be declared to
be a function taking no arguments and returning a pointer to
a function of the same type as the implementation.  For example:

     <pre class="smallexample">          void *my_memcpy (void *dst, const void *src, size_t len)
          {
            ...
            return dst;
          }
          
          static void * (*resolve_memcpy (void))(void *, const void *, size_t)
          {
            return my_memcpy; // we will just always select this routine
          }
</pre>
     <p class="noindent">The exported header file declaring the function the user calls would
contain:

     <pre class="smallexample">          extern void *memcpy (void *, const void *, size_t);
</pre>
     <p class="noindent">allowing the user to call <code>memcpy</code> as a regular function, unaware of
the actual implementation.  Finally, the indirect function needs to be
defined in the same translation unit as the resolver function:

     <pre class="smallexample">          void *memcpy (void *, const void *, size_t)
               __attribute__ ((ifunc ("resolve_memcpy")));
</pre>
     <p>In C++, the <code>ifunc</code> attribute takes a string that is the mangled name
of the resolver function.  A C++ resolver for a non-static member function
of class <code>C</code> should be declared to return a pointer to a non-member
function taking pointer to <code>C</code> as the first argument, followed by
the same arguments as of the implementation function.  G++ checks
the signatures of the two functions and issues
a <samp><span class="option">-Wattribute-alias</span></samp> warning for mismatches.  To suppress a warning
for the necessary cast from a pointer to the implementation member function
to the type of the corresponding non-member function use
the <samp><span class="option">-Wno-pmf-conversions</span></samp> option.  For example:

     <pre class="smallexample">          class S
          {
          private:
            int debug_impl (int);
            int optimized_impl (int);
          
            typedef int Func (S*, int);
          
            static Func* resolver ();
          public:
          
            int interface (int);
          };
          
          int S::debug_impl (int) { /* <span class="roman">...</span> */ }
          int S::optimized_impl (int) { /* <span class="roman">...</span> */ }
          
          S::Func* S::resolver ()
          {
            int (S::*pimpl) (int)
              = getenv ("DEBUG") ? &amp;S::debug_impl : &amp;S::optimized_impl;
          
            // Cast triggers -Wno-pmf-conversions.
            return reinterpret_cast&lt;Func*&gt;(pimpl);
          }
          
          int S::interface (int) __attribute__ ((ifunc ("_ZN1S8resolverEv")));
</pre>
     <p>Indirect functions cannot be weak.  Binutils version 2.20.1 or higher
and GNU C Library version 2.11.1 are required to use this feature.

     <br><dt><code>interrupt</code><dt><code>interrupt_handler</code><dd>Many GCC back ends support attributes to indicate that a function is
an interrupt handler, which tells the compiler to generate function
entry and exit sequences that differ from those from regular
functions.  The exact syntax and behavior are target-specific;
refer to the following subsections for details.

     <br><dt><code>leaf</code><dd><a name="index-g_t_0040code_007bleaf_007d-function-attribute-3501"></a>Calls to external functions with this attribute must return to the
current compilation unit only by return or by exception handling.  In
particular, a leaf function is not allowed to invoke callback functions
passed to it from the current compilation unit, directly call functions
exported by the unit, or <code>longjmp</code> into the unit.  Leaf functions
might still call functions from other compilation units and thus they
are not necessarily leaf in the sense that they contain no function
calls at all.

     <p>The attribute is intended for library functions to improve dataflow
analysis.  The compiler takes the hint that any data not escaping the
current compilation unit cannot be used or modified by the leaf
function.  For example, the <code>sin</code> function is a leaf function, but
<code>qsort</code> is not.

     <p>Note that leaf functions might indirectly run a signal handler defined
in the current compilation unit that uses static variables.  Similarly,
when lazy symbol resolution is in effect, leaf functions might invoke
indirect functions whose resolver function or implementation function is
defined in the current compilation unit and uses static variables.  There
is no standard-compliant way to write such a signal handler, resolver
function, or implementation function, and the best that you can do is to
remove the <code>leaf</code> attribute or mark all such static variables
<code>volatile</code>.  Lastly, for ELF-based systems that support symbol
interposition, care should be taken that functions defined in the
current compilation unit do not unexpectedly interpose other symbols
based on the defined standards mode and defined feature test macros;
otherwise an inadvertent callback would be added.

     <p>The attribute has no effect on functions defined within the current
compilation unit.  This is to allow easy merging of multiple compilation
units into one, for example, by using the link-time optimization.  For
this reason the attribute is not allowed on types to annotate indirect
calls.

     <br><dt><code>malloc</code><dd><a name="index-g_t_0040code_007bmalloc_007d-function-attribute-3502"></a><a name="index-functions-that-behave-like-malloc-3503"></a>This tells the compiler that a function is <code>malloc</code>-like, i.e.,
that the pointer <var>P</var> returned by the function cannot alias any
other pointer valid when the function returns, and moreover no
pointers to valid objects occur in any storage addressed by <var>P</var>.

     <p>Using this attribute can improve optimization.  Functions like
<code>malloc</code> and <code>calloc</code> have this property because they return
a pointer to uninitialized or zeroed-out storage.  However, functions
like <code>realloc</code> do not have this property, as they can return a
pointer to storage containing pointers.

     <br><dt><code>no_icf</code><dd><a name="index-g_t_0040code_007bno_005ficf_007d-function-attribute-3504"></a>This function attribute prevents a functions from being merged with another
semantically equivalent function.

     <br><dt><code>no_instrument_function</code><dd><a name="index-g_t_0040code_007bno_005finstrument_005ffunction_007d-function-attribute-3505"></a><a name="index-finstrument_002dfunctions-3506"></a>If <samp><span class="option">-finstrument-functions</span></samp> is given, profiling function calls are
generated at entry and exit of most user-compiled functions. 
Functions with this attribute are not so instrumented.

     <br><dt><code>no_profile_instrument_function</code><dd><a name="index-g_t_0040code_007bno_005fprofile_005finstrument_005ffunction_007d-function-attribute-3507"></a>The <code>no_profile_instrument_function</code> attribute on functions is used
to inform the compiler that it should not process any profile feedback based
optimization code instrumentation.

     <br><dt><code>no_reorder</code><dd><a name="index-g_t_0040code_007bno_005freorder_007d-function-attribute-3508"></a>Do not reorder functions or variables marked <code>no_reorder</code>
against each other or top level assembler statements the executable. 
The actual order in the program will depend on the linker command
line. Static variables marked like this are also not removed. 
This has a similar effect
as the <samp><span class="option">-fno-toplevel-reorder</span></samp> option, but only applies to the
marked symbols.

     <br><dt><code>no_sanitize ("</code><var>sanitize_option</var><code>")</code><dd><a name="index-g_t_0040code_007bno_005fsanitize_007d-function-attribute-3509"></a>The <code>no_sanitize</code> attribute on functions is used
to inform the compiler that it should not do sanitization of all options
mentioned in <var>sanitize_option</var>.  A list of values acceptable by
<samp><span class="option">-fsanitize</span></samp> option can be provided.

     <pre class="smallexample">          void __attribute__ ((no_sanitize ("alignment", "object-size")))
          f () { /* <span class="roman">Do something.</span> */; }
          void __attribute__ ((no_sanitize ("alignment,object-size")))
          g () { /* <span class="roman">Do something.</span> */; }
</pre>
     <br><dt><code>no_sanitize_address</code><dt><code>no_address_safety_analysis</code><dd><a name="index-g_t_0040code_007bno_005fsanitize_005faddress_007d-function-attribute-3510"></a>The <code>no_sanitize_address</code> attribute on functions is used
to inform the compiler that it should not instrument memory accesses
in the function when compiling with the <samp><span class="option">-fsanitize=address</span></samp> option. 
The <code>no_address_safety_analysis</code> is a deprecated alias of the
<code>no_sanitize_address</code> attribute, new code should use
<code>no_sanitize_address</code>.

     <br><dt><code>no_sanitize_thread</code><dd><a name="index-g_t_0040code_007bno_005fsanitize_005fthread_007d-function-attribute-3511"></a>The <code>no_sanitize_thread</code> attribute on functions is used
to inform the compiler that it should not instrument memory accesses
in the function when compiling with the <samp><span class="option">-fsanitize=thread</span></samp> option.

     <br><dt><code>no_sanitize_undefined</code><dd><a name="index-g_t_0040code_007bno_005fsanitize_005fundefined_007d-function-attribute-3512"></a>The <code>no_sanitize_undefined</code> attribute on functions is used
to inform the compiler that it should not check for undefined behavior
in the function when compiling with the <samp><span class="option">-fsanitize=undefined</span></samp> option.

     <br><dt><code>no_split_stack</code><dd><a name="index-g_t_0040code_007bno_005fsplit_005fstack_007d-function-attribute-3513"></a><a name="index-fsplit_002dstack-3514"></a>If <samp><span class="option">-fsplit-stack</span></samp> is given, functions have a small
prologue which decides whether to split the stack.  Functions with the
<code>no_split_stack</code> attribute do not have that prologue, and thus
may run with only a small amount of stack space available.

     <br><dt><code>no_stack_limit</code><dd><a name="index-g_t_0040code_007bno_005fstack_005flimit_007d-function-attribute-3515"></a>This attribute locally overrides the <samp><span class="option">-fstack-limit-register</span></samp>
and <samp><span class="option">-fstack-limit-symbol</span></samp> command-line options; it has the effect
of disabling stack limit checking in the function it applies to.

     <br><dt><code>noclone</code><dd><a name="index-g_t_0040code_007bnoclone_007d-function-attribute-3516"></a>This function attribute prevents a function from being considered for
cloning&mdash;a mechanism that produces specialized copies of functions
and which is (currently) performed by interprocedural constant
propagation.

     <br><dt><code>noinline</code><dd><a name="index-g_t_0040code_007bnoinline_007d-function-attribute-3517"></a>This function attribute prevents a function from being considered for
inlining. 
<!-- Don't enumerate the optimizations by name here; we try to be -->
<!-- future-compatible with this mechanism. -->
If the function does not have side effects, there are optimizations
other than inlining that cause function calls to be optimized away,
although the function call is live.  To keep such calls from being
optimized away, put
     <pre class="smallexample">          asm ("");
</pre>
     <p class="noindent">(see <a href="Extended-Asm.html#Extended-Asm">Extended Asm</a>) in the called function, to serve as a special
side effect.

     <br><dt><code>noipa</code><dd><a name="index-g_t_0040code_007bnoipa_007d-function-attribute-3518"></a>Disable interprocedural optimizations between the function with this
attribute and its callers, as if the body of the function is not available
when optimizing callers and the callers are unavailable when optimizing
the body.  This attribute implies <code>noinline</code>, <code>noclone</code> and
<code>no_icf</code> attributes.    However, this attribute is not equivalent
to a combination of other attributes, because its purpose is to suppress
existing and future optimizations employing interprocedural analysis,
including those that do not have an attribute suitable for disabling
them individually.  This attribute is supported mainly for the purpose
of testing the compiler.

     <br><dt><code>nonnull (</code><var>arg-index</var><code>, ...)</code><dd><a name="index-g_t_0040code_007bnonnull_007d-function-attribute-3519"></a><a name="index-functions-with-non_002dnull-pointer-arguments-3520"></a>The <code>nonnull</code> attribute specifies that some function parameters should
be non-null pointers.  For instance, the declaration:

     <pre class="smallexample">          extern void *
          my_memcpy (void *dest, const void *src, size_t len)
                  __attribute__((nonnull (1, 2)));
</pre>
     <p class="noindent">causes the compiler to check that, in calls to <code>my_memcpy</code>,
arguments <var>dest</var> and <var>src</var> are non-null.  If the compiler
determines that a null pointer is passed in an argument slot marked
as non-null, and the <samp><span class="option">-Wnonnull</span></samp> option is enabled, a warning
is issued.  The compiler may also choose to make optimizations based
on the knowledge that certain function arguments will never be null.

     <p>If no argument index list is given to the <code>nonnull</code> attribute,
all pointer arguments are marked as non-null.  To illustrate, the
following declaration is equivalent to the previous example:

     <pre class="smallexample">          extern void *
          my_memcpy (void *dest, const void *src, size_t len)
                  __attribute__((nonnull));
</pre>
     <br><dt><code>noplt</code><dd><a name="index-g_t_0040code_007bnoplt_007d-function-attribute-3521"></a>The <code>noplt</code> attribute is the counterpart to option <samp><span class="option">-fno-plt</span></samp>. 
Calls to functions marked with this attribute in position-independent code
do not use the PLT.

     <pre class="smallexample">          /* Externally defined function foo.  */
          int foo () __attribute__ ((noplt));
          
          int
          main (/* <span class="roman">...</span> */)
          {
            /* <span class="roman">...</span> */
            foo ();
            /* <span class="roman">...</span> */
          }
</pre>
     <p>The <code>noplt</code> attribute on function <code>foo</code>
tells the compiler to assume that
the function <code>foo</code> is externally defined and that the call to
<code>foo</code> must avoid the PLT
in position-independent code.

     <p>In position-dependent code, a few targets also convert calls to
functions that are marked to not use the PLT to use the GOT instead.

     <br><dt><code>noreturn</code><dd><a name="index-g_t_0040code_007bnoreturn_007d-function-attribute-3522"></a><a name="index-functions-that-never-return-3523"></a>A few standard library functions, such as <code>abort</code> and <code>exit</code>,
cannot return.  GCC knows this automatically.  Some programs define
their own functions that never return.  You can declare them
<code>noreturn</code> to tell the compiler this fact.  For example,

     <pre class="smallexample">          void fatal () __attribute__ ((noreturn));
          
          void
          fatal (/* <span class="roman">...</span> */)
          {
            /* <span class="roman">...</span> */ /* <span class="roman">Print error message.</span> */ /* <span class="roman">...</span> */
            exit (1);
          }
</pre>
     <p>The <code>noreturn</code> keyword tells the compiler to assume that
<code>fatal</code> cannot return.  It can then optimize without regard to what
would happen if <code>fatal</code> ever did return.  This makes slightly
better code.  More importantly, it helps avoid spurious warnings of
uninitialized variables.

     <p>The <code>noreturn</code> keyword does not affect the exceptional path when that
applies: a <code>noreturn</code>-marked function may still return to the caller
by throwing an exception or calling <code>longjmp</code>.

     <p>Do not assume that registers saved by the calling function are
restored before calling the <code>noreturn</code> function.

     <p>It does not make sense for a <code>noreturn</code> function to have a return
type other than <code>void</code>.

     <br><dt><code>nothrow</code><dd><a name="index-g_t_0040code_007bnothrow_007d-function-attribute-3524"></a>The <code>nothrow</code> attribute is used to inform the compiler that a
function cannot throw an exception.  For example, most functions in
the standard C library can be guaranteed not to throw an exception
with the notable exceptions of <code>qsort</code> and <code>bsearch</code> that
take function pointer arguments.

     <br><dt><code>optimize</code><dd><a name="index-g_t_0040code_007boptimize_007d-function-attribute-3525"></a>The <code>optimize</code> attribute is used to specify that a function is to
be compiled with different optimization options than specified on the
command line.  Arguments can either be numbers or strings.  Numbers
are assumed to be an optimization level.  Strings that begin with
<code>O</code> are assumed to be an optimization option, while other options
are assumed to be used with a <code>-f</code> prefix.  You can also use the
&lsquo;<samp><span class="samp">#pragma GCC optimize</span></samp>&rsquo; pragma to set the optimization options
that affect more than one function. 
See <a href="Function-Specific-Option-Pragmas.html#Function-Specific-Option-Pragmas">Function Specific Option Pragmas</a>, for details about the
&lsquo;<samp><span class="samp">#pragma GCC optimize</span></samp>&rsquo; pragma.

     <p>This attribute should be used for debugging purposes only.  It is not
suitable in production code.

     <br><dt><code>patchable_function_entry</code><dd><a name="index-g_t_0040code_007bpatchable_005ffunction_005fentry_007d-function-attribute-3526"></a><a name="index-extra-NOP-instructions-at-the-function-entry-point-3527"></a>In case the target's text segment can be made writable at run time by
any means, padding the function entry with a number of NOPs can be
used to provide a universal tool for instrumentation.

     <p>The <code>patchable_function_entry</code> function attribute can be used to
change the number of NOPs to any desired value.  The two-value syntax
is the same as for the command-line switch
<samp><span class="option">-fpatchable-function-entry=N,M</span></samp>, generating <var>N</var> NOPs, with
the function entry point before the <var>M</var>th NOP instruction. 
<var>M</var> defaults to 0 if omitted e.g. function entry point is before
the first NOP.

     <p>If patchable function entries are enabled globally using the command-line
option <samp><span class="option">-fpatchable-function-entry=N,M</span></samp>, then you must disable
instrumentation on all functions that are part of the instrumentation
framework with the attribute <code>patchable_function_entry (0)</code>
to prevent recursion.

     <br><dt><code>pure</code><dd><a name="index-g_t_0040code_007bpure_007d-function-attribute-3528"></a><a name="index-functions-that-have-no-side-effects-3529"></a>Many functions have no effects except the return value and their
return value depends only on the parameters and/or global variables. 
Calls to such functions can be subject
to common subexpression elimination and loop optimization just as an
arithmetic operator would be.  These functions should be declared
with the attribute <code>pure</code>.  For example,

     <pre class="smallexample">          int square (int) __attribute__ ((pure));
</pre>
     <p class="noindent">says that the hypothetical function <code>square</code> is safe to call
fewer times than the program says.

     <p>Some common examples of pure functions are <code>strlen</code> or <code>memcmp</code>. 
Interesting non-pure functions are functions with infinite loops or those
depending on volatile memory or other system resource, that may change between
two consecutive calls (such as <code>feof</code> in a multithreading environment).

     <p>The <code>pure</code> attribute imposes similar but looser restrictions on
a function's defintion than the <code>const</code> attribute: it allows the
function to read global variables.  Decorating the same function with
both the <code>pure</code> and the <code>const</code> attribute is diagnosed. 
Because a <code>pure</code> function cannot have any side effects it does not
make sense for such a function to return <code>void</code>.  Declaring such
a function is diagnosed.

     <br><dt><code>returns_nonnull</code><dd><a name="index-g_t_0040code_007breturns_005fnonnull_007d-function-attribute-3530"></a>The <code>returns_nonnull</code> attribute specifies that the function
return value should be a non-null pointer.  For instance, the declaration:

     <pre class="smallexample">          extern void *
          mymalloc (size_t len) __attribute__((returns_nonnull));
</pre>
     <p class="noindent">lets the compiler optimize callers based on the knowledge
that the return value will never be null.

     <br><dt><code>returns_twice</code><dd><a name="index-g_t_0040code_007breturns_005ftwice_007d-function-attribute-3531"></a><a name="index-functions-that-return-more-than-once-3532"></a>The <code>returns_twice</code> attribute tells the compiler that a function may
return more than one time.  The compiler ensures that all registers
are dead before calling such a function and emits a warning about
the variables that may be clobbered after the second return from the
function.  Examples of such functions are <code>setjmp</code> and <code>vfork</code>. 
The <code>longjmp</code>-like counterpart of such function, if any, might need
to be marked with the <code>noreturn</code> attribute.

     <br><dt><code>section ("</code><var>section-name</var><code>")</code><dd><a name="index-g_t_0040code_007bsection_007d-function-attribute-3533"></a><a name="index-functions-in-arbitrary-sections-3534"></a>Normally, the compiler places the code it generates in the <code>text</code> section. 
Sometimes, however, you need additional sections, or you need certain
particular functions to appear in special sections.  The <code>section</code>
attribute specifies that a function lives in a particular section. 
For example, the declaration:

     <pre class="smallexample">          extern void foobar (void) __attribute__ ((section ("bar")));
</pre>
     <p class="noindent">puts the function <code>foobar</code> in the <code>bar</code> section.

     <p>Some file formats do not support arbitrary sections so the <code>section</code>
attribute is not available on all platforms. 
If you need to map the entire contents of a module to a particular
section, consider using the facilities of the linker instead.

     <br><dt><code>sentinel</code><dd><a name="index-g_t_0040code_007bsentinel_007d-function-attribute-3535"></a>This function attribute ensures that a parameter in a function call is
an explicit <code>NULL</code>.  The attribute is only valid on variadic
functions.  By default, the sentinel is located at position zero, the
last parameter of the function call.  If an optional integer position
argument P is supplied to the attribute, the sentinel must be located at
position P counting backwards from the end of the argument list.

     <pre class="smallexample">          __attribute__ ((sentinel))
          is equivalent to
          __attribute__ ((sentinel(0)))
</pre>
     <p>The attribute is automatically set with a position of 0 for the built-in
functions <code>execl</code> and <code>execlp</code>.  The built-in function
<code>execle</code> has the attribute set with a position of 1.

     <p>A valid <code>NULL</code> in this context is defined as zero with any pointer
type.  If your system defines the <code>NULL</code> macro with an integer type
then you need to add an explicit cast.  GCC replaces <code>stddef.h</code>
with a copy that redefines NULL appropriately.

     <p>The warnings for missing or incorrect sentinels are enabled with
<samp><span class="option">-Wformat</span></samp>.

     <br><dt><code>simd</code><dt><code>simd("</code><var>mask</var><code>")</code><dd><a name="index-g_t_0040code_007bsimd_007d-function-attribute-3536"></a>This attribute enables creation of one or more function versions that
can process multiple arguments using SIMD instructions from a
single invocation.  Specifying this attribute allows compiler to
assume that such versions are available at link time (provided
in the same or another translation unit).  Generated versions are
target-dependent and described in the corresponding Vector ABI document.  For
x86_64 target this document can be found
<a href="https://sourceware.org/glibc/wiki/libmvec?action=AttachFile&amp;do=view&amp;target=VectorABI.txt">here</a><!-- /@w -->.

     <p>The optional argument <var>mask</var> may have the value
<code>notinbranch</code> or <code>inbranch</code>,
and instructs the compiler to generate non-masked or masked
clones correspondingly. By default, all clones are generated.

     <p>If the attribute is specified and <code>#pragma omp declare simd</code> is
present on a declaration and the <samp><span class="option">-fopenmp</span></samp> or <samp><span class="option">-fopenmp-simd</span></samp>
switch is specified, then the attribute is ignored.

     <br><dt><code>stack_protect</code><dd><a name="index-g_t_0040code_007bstack_005fprotect_007d-function-attribute-3537"></a>This attribute adds stack protection code to the function if
flags <samp><span class="option">-fstack-protector</span></samp>, <samp><span class="option">-fstack-protector-strong</span></samp>
or <samp><span class="option">-fstack-protector-explicit</span></samp> are set.

     <br><dt><code>target (</code><var>options</var><code>)</code><dd><a name="index-g_t_0040code_007btarget_007d-function-attribute-3538"></a>Multiple target back ends implement the <code>target</code> attribute
to specify that a function is to
be compiled with different target options than specified on the
command line.  This can be used for instance to have functions
compiled with a different ISA (instruction set architecture) than the
default.  You can also use the &lsquo;<samp><span class="samp">#pragma GCC target</span></samp>&rsquo; pragma to set
more than one function to be compiled with specific target options. 
See <a href="Function-Specific-Option-Pragmas.html#Function-Specific-Option-Pragmas">Function Specific Option Pragmas</a>, for details about the
&lsquo;<samp><span class="samp">#pragma GCC target</span></samp>&rsquo; pragma.

     <p>For instance, on an x86, you could declare one function with the
<code>target("sse4.1,arch=core2")</code> attribute and another with
<code>target("sse4a,arch=amdfam10")</code>.  This is equivalent to
compiling the first function with <samp><span class="option">-msse4.1</span></samp> and
<samp><span class="option">-march=core2</span></samp> options, and the second function with
<samp><span class="option">-msse4a</span></samp> and <samp><span class="option">-march=amdfam10</span></samp> options.  It is up to you
to make sure that a function is only invoked on a machine that
supports the particular ISA it is compiled for (for example by using
<code>cpuid</code> on x86 to determine what feature bits and architecture
family are used).

     <pre class="smallexample">          int core2_func (void) __attribute__ ((__target__ ("arch=core2")));
          int sse3_func (void) __attribute__ ((__target__ ("sse3")));
</pre>
     <p>You can either use multiple
strings separated by commas to specify multiple options,
or separate the options with a comma (&lsquo;<samp><span class="samp">,</span></samp>&rsquo;) within a single string.

     <p>The options supported are specific to each target; refer to <a href="x86-Function-Attributes.html#x86-Function-Attributes">x86 Function Attributes</a>, <a href="PowerPC-Function-Attributes.html#PowerPC-Function-Attributes">PowerPC Function Attributes</a>,
<a href="ARM-Function-Attributes.html#ARM-Function-Attributes">ARM Function Attributes</a>, <a href="AArch64-Function-Attributes.html#AArch64-Function-Attributes">AArch64 Function Attributes</a>,
<a href="Nios-II-Function-Attributes.html#Nios-II-Function-Attributes">Nios II Function Attributes</a>, and <a href="S_002f390-Function-Attributes.html#S_002f390-Function-Attributes">S/390 Function Attributes</a>
for details.

     <br><dt><code>target_clones (</code><var>options</var><code>)</code><dd><a name="index-g_t_0040code_007btarget_005fclones_007d-function-attribute-3539"></a>The <code>target_clones</code> attribute is used to specify that a function
be cloned into multiple versions compiled with different target options
than specified on the command line.  The supported options and restrictions
are the same as for <code>target</code> attribute.

     <p>For instance, on an x86, you could compile a function with
<code>target_clones("sse4.1,avx")</code>.  GCC creates two function clones,
one compiled with <samp><span class="option">-msse4.1</span></samp> and another with <samp><span class="option">-mavx</span></samp>.

     <p>On a PowerPC, you can compile a function with
<code>target_clones("cpu=power9,default")</code>.  GCC will create two
function clones, one compiled with <samp><span class="option">-mcpu=power9</span></samp> and another
with the default options.  GCC must be configured to use GLIBC 2.23 or
newer in order to use the <code>target_clones</code> attribute.

     <p>It also creates a resolver function (see
the <code>ifunc</code> attribute above) that dynamically selects a clone
suitable for current architecture.  The resolver is created only if there
is a usage of a function with <code>target_clones</code> attribute.

     <br><dt><code>unused</code><dd><a name="index-g_t_0040code_007bunused_007d-function-attribute-3540"></a>This attribute, attached to a function, means that the function is meant
to be possibly unused.  GCC does not produce a warning for this
function.

     <br><dt><code>used</code><dd><a name="index-g_t_0040code_007bused_007d-function-attribute-3541"></a>This attribute, attached to a function, means that code must be emitted
for the function even if it appears that the function is not referenced. 
This is useful, for example, when the function is referenced only in
inline assembly.

     <p>When applied to a member function of a C++ class template, the
attribute also means that the function is instantiated if the
class itself is instantiated.

     <br><dt><code>visibility ("</code><var>visibility_type</var><code>")</code><dd><a name="index-g_t_0040code_007bvisibility_007d-function-attribute-3542"></a>This attribute affects the linkage of the declaration to which it is attached. 
It can be applied to variables (see <a href="Common-Variable-Attributes.html#Common-Variable-Attributes">Common Variable Attributes</a>) and types
(see <a href="Common-Type-Attributes.html#Common-Type-Attributes">Common Type Attributes</a>) as well as functions.

     <p>There are four supported <var>visibility_type</var> values: default,
hidden, protected or internal visibility.

     <pre class="smallexample">          void __attribute__ ((visibility ("protected")))
          f () { /* <span class="roman">Do something.</span> */; }
          int i __attribute__ ((visibility ("hidden")));
</pre>
     <p>The possible values of <var>visibility_type</var> correspond to the
visibility settings in the ELF gABI.

          <dl>
<!-- keep this list of visibilities in alphabetical order. -->

          <dt><code>default</code><dd>Default visibility is the normal case for the object file format. 
This value is available for the visibility attribute to override other
options that may change the assumed visibility of entities.

          <p>On ELF, default visibility means that the declaration is visible to other
modules and, in shared libraries, means that the declared entity may be
overridden.

          <p>On Darwin, default visibility means that the declaration is visible to
other modules.

          <p>Default visibility corresponds to &ldquo;external linkage&rdquo; in the language.

          <br><dt><code>hidden</code><dd>Hidden visibility indicates that the entity declared has a new
form of linkage, which we call &ldquo;hidden linkage&rdquo;.  Two
declarations of an object with hidden linkage refer to the same object
if they are in the same shared object.

          <br><dt><code>internal</code><dd>Internal visibility is like hidden visibility, but with additional
processor specific semantics.  Unless otherwise specified by the
psABI, GCC defines internal visibility to mean that a function is
<em>never</em> called from another module.  Compare this with hidden
functions which, while they cannot be referenced directly by other
modules, can be referenced indirectly via function pointers.  By
indicating that a function cannot be called from outside the module,
GCC may for instance omit the load of a PIC register since it is known
that the calling function loaded the correct value.

          <br><dt><code>protected</code><dd>Protected visibility is like default visibility except that it
indicates that references within the defining module bind to the
definition in that module.  That is, the declared entity cannot be
overridden by another module.

     </dl>

     <p>All visibilities are supported on many, but not all, ELF targets
(supported when the assembler supports the &lsquo;<samp><span class="samp">.visibility</span></samp>&rsquo;
pseudo-op).  Default visibility is supported everywhere.  Hidden
visibility is supported on Darwin targets.

     <p>The visibility attribute should be applied only to declarations that
would otherwise have external linkage.  The attribute should be applied
consistently, so that the same entity should not be declared with
different settings of the attribute.

     <p>In C++, the visibility attribute applies to types as well as functions
and objects, because in C++ types have linkage.  A class must not have
greater visibility than its non-static data member types and bases,
and class members default to the visibility of their class.  Also, a
declaration without explicit visibility is limited to the visibility
of its type.

     <p>In C++, you can mark member functions and static member variables of a
class with the visibility attribute.  This is useful if you know a
particular method or static member variable should only be used from
one shared object; then you can mark it hidden while the rest of the
class has default visibility.  Care must be taken to avoid breaking
the One Definition Rule; for example, it is usually not useful to mark
an inline method as hidden without marking the whole class as hidden.

     <p>A C++ namespace declaration can also have the visibility attribute.

     <pre class="smallexample">          namespace nspace1 __attribute__ ((visibility ("protected")))
          { /* <span class="roman">Do something.</span> */; }
</pre>
     <p>This attribute applies only to the particular namespace body, not to
other definitions of the same namespace; it is equivalent to using
&lsquo;<samp><span class="samp">#pragma GCC visibility</span></samp>&rsquo; before and after the namespace
definition (see <a href="Visibility-Pragmas.html#Visibility-Pragmas">Visibility Pragmas</a>).

     <p>In C++, if a template argument has limited visibility, this
restriction is implicitly propagated to the template instantiation. 
Otherwise, template instantiations and specializations default to the
visibility of their template.

     <p>If both the template and enclosing class have explicit visibility, the
visibility from the template is used.

     <br><dt><code>warn_unused_result</code><dd><a name="index-g_t_0040code_007bwarn_005funused_005fresult_007d-function-attribute-3543"></a>The <code>warn_unused_result</code> attribute causes a warning to be emitted
if a caller of the function with this attribute does not use its
return value.  This is useful for functions where not checking
the result is either a security problem or always a bug, such as
<code>realloc</code>.

     <pre class="smallexample">          int fn () __attribute__ ((warn_unused_result));
          int foo ()
          {
            if (fn () &lt; 0) return -1;
            fn ();
            return 0;
          }
</pre>
     <p class="noindent">results in warning on line 5.

     <br><dt><code>weak</code><dd><a name="index-g_t_0040code_007bweak_007d-function-attribute-3544"></a>The <code>weak</code> attribute causes the declaration to be emitted as a weak
symbol rather than a global.  This is primarily useful in defining
library functions that can be overridden in user code, though it can
also be used with non-function declarations.  Weak symbols are supported
for ELF targets, and also for a.out targets when using the GNU assembler
and linker.

     <br><dt><code>weakref</code><dt><code>weakref ("</code><var>target</var><code>")</code><dd><a name="index-g_t_0040code_007bweakref_007d-function-attribute-3545"></a>The <code>weakref</code> attribute marks a declaration as a weak reference. 
Without arguments, it should be accompanied by an <code>alias</code> attribute
naming the target symbol.  Optionally, the <var>target</var> may be given as
an argument to <code>weakref</code> itself.  In either case, <code>weakref</code>
implicitly marks the declaration as <code>weak</code>.  Without a
<var>target</var>, given as an argument to <code>weakref</code> or to <code>alias</code>,
<code>weakref</code> is equivalent to <code>weak</code>.

     <pre class="smallexample">          static int x() __attribute__ ((weakref ("y")));
          /* is equivalent to... */
          static int x() __attribute__ ((weak, weakref, alias ("y")));
          /* and to... */
          static int x() __attribute__ ((weakref));
          static int x() __attribute__ ((alias ("y")));
</pre>
     <p>A weak reference is an alias that does not by itself require a
definition to be given for the target symbol.  If the target symbol is
only referenced through weak references, then it becomes a <code>weak</code>
undefined symbol.  If it is directly referenced, however, then such
strong references prevail, and a definition is required for the
symbol, not necessarily in the same translation unit.

     <p>The effect is equivalent to moving all references to the alias to a
separate translation unit, renaming the alias to the aliased symbol,
declaring it as weak, compiling the two separate translation units and
performing a reloadable link on them.

     <p>At present, a declaration to which <code>weakref</code> is attached can
only be <code>static</code>.

 </dl>

<!-- This is the end of the target-independent attribute table -->
 </body></html>

